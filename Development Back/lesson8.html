<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Lesson 08 - Multitenancy & Advanced Topics</title><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet"><style>:root{--primary-blue:#3b82f6;--dark-bg:#020617;--card-bg:rgba(255,255,255,0.05);--border-light:rgba(255,255,255,0.12);--text-main:#e5e7eb;--text-dim:#94a3b8;--accent-green:#4ed9c2;--accent-cyan:#4ed9c2}[data-theme="light"]{--primary-blue:#3b82f6;--dark-bg:#f8fafc;--card-bg:#ffffff;--border-light:rgba(15,23,42,0.12);--text-main:#0f172a;--text-dim:#64748b;--accent-green:#06b6d4;--accent-cyan:#06b6d4}*{margin:0;padding:0;box-sizing:border-box}body{font-family:Inter,sans-serif;background:var(--dark-bg);color:var(--text-main);min-height:100vh;line-height:1.6;transition:background-color .3s ease,color .3s ease}.top-bar{background:var(--card-bg);backdrop-filter:blur(12px);padding:18px 5%;border-bottom:1px solid var(--border-light);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000}.top-bar h2{color:var(--text-main);margin:0;font-size:1.5rem}.exit-link{color:var(--text-dim);text-decoration:none;font-weight:700;font-size:.95rem;transition:color .3s ease}.exit-link:hover{color:var(--text-main)}.theme-toggle{background:rgba(255,255,255,.1);border:1px solid var(--border-light);border-radius:12px;padding:8px 16px;cursor:pointer;display:flex;align-items:center;gap:8px;color:var(--text-main);font-weight:600;font-size:.9rem;transition:all .2s ease;margin-left:auto}.theme-toggle:hover{background:rgba(255,255,255,.15);transform:translateY(-2px)}.theme-toggle svg{width:20px;height:20px}.hero{text-align:center;padding:80px 20px 60px}.hero .badge{color:var(--accent-green);font-weight:800;font-size:.9rem;text-transform:uppercase;letter-spacing:2px;margin-bottom:12px}.hero h1{font-size:3.2rem;font-weight:800;background:linear-gradient(to right,var(--text-main),var(--primary-blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:12px}.hero p{color:var(--text-dim);font-size:1.15rem;max-width:600px;margin:0 auto}.timeline-nav{display:flex;justify-content:center;gap:18px;position:relative;margin:50px 0 70px;padding:0 5%;flex-wrap:wrap}.timeline-line{position:absolute;top:20px;left:10%;right:10%;height:3px;background:var(--border-light);z-index:1}.step-node{position:relative;z-index:2;text-align:center;cursor:pointer;min-width:68px}.dot{width:48px;height:48px;background:var(--dark-bg);border:3px solid var(--border-light);border-radius:50%;margin:0 auto 12px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.3rem;color:var(--text-dim);transition:all .35s ease}.step-node.active .dot,.step-node:hover .dot{background:var(--primary-blue);border-color:var(--primary-blue);color:#fff;box-shadow:0 0 24px rgba(59,130,246,.5);transform:scale(1.12)}.node-label{font-size:.6rem;font-weight:700;color:var(--text-dim);text-transform:uppercase;letter-spacing:.5px}.step-node.active .node-label{color:var(--text-main)}.step-content{display:none;max-width:1000px;margin:0 auto;padding:0 25px 80px;animation:fadeIn .5s ease}.step-content.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}h2{font-size:2.4rem;margin-bottom:28px;color:var(--text-main);font-weight:800}h3{font-size:1.6rem;margin:32px 0 16px 0;color:var(--text-main);font-weight:700}.theory-box{background:var(--card-bg);border:1px solid var(--border-light);border-radius:16px;padding:28px;margin-bottom:36px;color:var(--text-dim);font-size:1.1rem;line-height:1.8}.highlight-box{background:linear-gradient(135deg,rgba(59,130,246,.15),rgba(168,85,247,.15));border-left:4px solid var(--primary-blue);padding:20px 24px;margin:28px 0;border-radius:8px;color:var(--text-main);font-weight:500}.step-content p{color:var(--text-dim);margin-bottom:20px;font-size:1.05rem;line-height:1.75}.step-content strong{color:var(--text-main);font-weight:700}code{background:rgba(59,130,246,.1);padding:2px 8px;border-radius:4px;font-family:"Fira Code",monospace;font-size:.95em;color:var(--accent-cyan)}.code-block{background:rgba(0,0,0,.3);border:1px solid var(--border-light);border-radius:12px;padding:20px;margin:24px 0;font-family:"Fira Code",monospace;font-size:.9rem;overflow-x:auto;color:var(--accent-cyan);line-height:1.6;white-space:pre-wrap}ul{margin:20px 0;padding-left:24px}ul li{margin:12px 0;color:var(--text-dim);line-height:1.7}ol{margin:20px 0;padding-left:24px}ol li{margin:12px 0;color:var(--text-dim);line-height:1.7}table{width:100%;border-collapse:collapse;margin:28px 0;background:var(--card-bg);border-radius:12px;overflow:hidden}table th{background:rgba(59,130,246,.15);padding:16px;text-align:left;font-weight:700;color:var(--text-main);border-bottom:2px solid var(--border-light)}table td{padding:16px;border-bottom:1px solid var(--border-light);color:var(--text-dim)}table tr:last-child td{border-bottom:none}table tr:hover{background:rgba(255,255,255,.03)}footer{text-align:center;padding:40px 20px;color:var(--text-dim);font-size:.9rem;border-top:1px solid var(--border-light);margin-top:60px}footer p{margin:8px 0}</style></head><body><nav class="top-bar">
        <a href="../../../../index.html" class="logo-link">
            <img src="../../../../logo.jpeg" alt="Logo" class="site-logo">
        </a>
        <a href="../../../../index.html" style="text-decoration: none;">
            <h2 style="color: white; margin: 0;">Digital Marketing</h2>
        </a>
        <a href="apis-lecture.html" class="exit-link">← Back to Syllabus</a>
        <h2>Multitenancy & Advanced Topics</h2><button class="theme-toggle" id="themeToggle"><svg class="sun-icon" fill="currentColor" viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><svg class="moon-icon" fill="currentColor" viewBox="0 0 24 24" style="display:none;"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></button></nav><div class="hero"><div class="badge">Lesson 08</div><h1>Multitenancy & Advanced Topics</h1><p>Advanced API design patterns and best practices</p></div><div class="lesson-container"><nav class="timeline-nav"><div class="timeline-line"></div><div class="step-node active" onclick="showStep(0)"><div class="dot">1</div><div class="node-label">Multitenancy</div></div><div class="step-node" onclick="showStep(1)"><div class="dot">2</div><div class="node-label">Subdomain</div></div><div class="step-node" onclick="showStep(2)"><div class="dot">3</div><div class="node-label">Headers</div></div><div class="step-node" onclick="showStep(3)"><div class="dot">4</div><div class="node-label">URI Path</div></div><div class="step-node" onclick="showStep(4)"><div class="dot">5</div><div class="node-label">Tracing</div></div><div class="step-node" onclick="showStep(5)"><div class="dot">6</div><div class="node-label">RMM</div></div><div class="step-node" onclick="showStep(6)"><div class="dot">7</div><div class="node-label">OpenAPI</div></div></nav><div class="step-content active"><h2>Multitenant Web APIs</h2><div class="theory-box">A multitenant web API solution is shared by multiple tenants, such as distinct organizations that have their own groups of users.</div><p>Multitenancy significantly affects web API design because it dictates how resources are accessed and discovered across multiple tenants within a single web API.</p><h3>Key Considerations</h3><ul><li>Resource isolation between tenants</li><li>Scalability across multiple tenants</li><li>Tenant-specific customizations</li><li>Security and data separation</li></ul><div class="highlight-box"><strong>Design Principle:</strong> Design an API with multitenancy in mind to avoid future refactoring. A well-architected API should clearly define how tenants are identified in requests.</div><h3>Common Identification Methods</h3><ul><li>Subdomains or custom domains</li><li>HTTP headers</li><li>URI path segments</li><li>JWT token claims</li></ul></div><div class="step-content"><h2>Subdomain/Domain-Based Isolation</h2><div class="theory-box">This approach routes requests using tenant-specific domains. Wildcard domains use subdomains for flexibility, while custom domains allow tenants to use their own domains.</div><h3>Wildcard Subdomain Example</h3><div class="code-block">GET https://adventureworks.api.contoso.com/orders/3
GET https://fabrikam.api.contoso.com/orders/3</div><p>Each tenant has their own subdomain (adventureworks, fabrikam) under the main API domain.</p><h3>Custom Domain Example</h3><div class="code-block">GET https://api.adventureworks.com/orders/3
GET https://api.fabrikam.com/orders/3</div><h3>Implementation Requirements</h3><ul><li>Proper DNS configuration (A and CNAME records)</li><li>Wildcard SSL certificates</li><li>Preserve hostname between reverse proxy and backend</li><li>Avoid exposing internal URLs</li></ul><h3>Benefits</h3><ul><li>Clear tenant separation</li><li>Easy to route at DNS/load balancer level</li><li>Supports data residency requirements</li><li>Professional, branded experience</li></ul><h3>Challenges</h3><ul><li>DNS management complexity</li><li>SSL certificate management</li><li>Configuration overhead for many tenants</li></ul></div><div class="step-content"><h2>Header-Based Tenancy</h2><div class="theory-box">Tenant information can be passed through custom HTTP headers like <code>X-Tenant-ID</code> or extracted from JWT claims.</div><h3>Custom Header Example</h3><div class="code-block">GET https://api.contoso.com/orders/3
X-Tenant-ID: adventureworks</div><h3>Host Header Example</h3><div class="code-block">GET https://api.contoso.com/orders/3
Host: adventureworks</div><h3>JWT Token Claims</h3><div class="code-block">GET https://api.contoso.com/orders/3
Authorization: Bearer <JWT-token-with-tenant-id-claim></div><p>The JWT payload contains: <code>{"tenant_id": "adventureworks", ...}</code></p><h3>Benefits</h3><ul><li>Centralized authentication</li><li>Cleaner, more RESTful API design</li><li>Dynamic tenant management at runtime</li><li>SDK/API client simplification</li></ul><h3>Challenges</h3><ul><li>Requires Layer 7 (L7) gateway for header inspection</li><li>Complicates caching (must account for headers)</li><li>Potential data leakage if cache doesn't differentiate</li><li>Higher compute costs for request inspection</li></ul><div class="highlight-box"><strong>Security Warning:</strong> If caching doesn't differentiate by headers, it can serve one tenant's data to another - a critical security risk!</div></div><div class="step-content"><h2>URI Path-Based Isolation</h2><div class="theory-box">This approach appends tenant identifiers within the resource hierarchy. The API gateway or reverse proxy determines the tenant based on the path segment.</div><h3>Example</h3><div class="code-block">GET https://api.contoso.com/tenants/adventureworks/orders/3
GET https://api.contoso.com/tenants/fabrikam/orders/3</div><h3>Pros</h3><ul><li>Clear and explicit tenant identification</li><li>Easy to understand from URI alone</li><li>Works well with simple routing</li></ul><h3>Cons</h3><ul><li>Compromises RESTful design principles</li><li>More complex routing logic required</li><li>Pattern matching or regex needed for parsing</li><li>URI canonicalization complexity</li></ul><p>Both header-based and path-based approaches enable efficient infrastructure sharing to lower operational costs and enhance performance in large-scale, multitenant web APIs.</p></div><div class="step-content"><h2>Distributed Tracing</h2><div class="theory-box">As distributed systems and microservice architectures become standard, using headers to propagate trace context in API requests is a best practice to achieve end-to-end visibility.</div><h3>Common Trace Headers</h3><ul><li><code>Correlation-ID</code></li><li><code>X-Request-ID</code></li><li><code>X-Trace-ID</code></li></ul><h3>Request Example</h3><div class="code-block">GET https://api.contoso.com/orders/3
Correlation-ID: aaaa0000-bb11-2222-33cc-444444dddddd</div><h3>Response Example</h3><div class="code-block">HTTP/1.1 200 OK
Correlation-ID: aaaa0000-bb11-2222-33cc-444444dddddd

{...}</div><h3>Benefits</h3><ul><li>Track requests across multiple services</li><li>Rapid identification of failures</li><li>Monitor latency bottlenecks</li><li>Map API dependencies</li><li>Enhanced debugging capabilities</li><li>Better observability</li></ul><div class="highlight-box"><strong>Best Practice:</strong> Always propagate correlation IDs through your entire service chain for comprehensive request tracking.</div></div><div class="step-content"><h2>Richardson Maturity Model (RMM)</h2><div class="theory-box">In 2008, Leonard Richardson proposed the Richardson Maturity Model for web APIs. The RMM defines four levels of maturity based on REST principles.</div><h3>Maturity Levels</h3><table><thead><tr><th>Level</th><th>Description</th><th>Example</th></tr></thead><tbody><tr><td><strong>Level 0</strong></td><td>Define one URI, all operations are POST</td><td>SOAP web services</td></tr><tr><td><strong>Level 1</strong></td><td>Create separate URIs for individual resources</td><td>/customers/1, /products/5</td></tr><tr><td><strong>Level 2</strong></td><td>Use HTTP methods to define operations</td><td>GET /customers, POST /orders</td></tr><tr><td><strong>Level 3</strong></td><td>Use hypermedia (HATEOAS)</td><td>Responses include navigation links</td></tr></tbody></table><p>In practice, many published web APIs align approximately with <strong>Level 2</strong>. <strong>Level 3</strong> is truly a RESTful API according to Fielding's definition.</p><h3>Progression Path</h3><ol><li><strong>Level 0:</strong> Single endpoint, POST everything</li><li><strong>Level 1:</strong> Multiple resource URIs</li><li><strong>Level 2:</strong> HTTP verbs + status codes</li><li><strong>Level 3:</strong> HATEOAS + discoverability</li></ol></div><div class="step-content"><h2>OpenAPI Specification (OAS)</h2><div class="theory-box">The OpenAPI Initiative was created to standardize REST API descriptions across vendors. The spec was called Swagger before being renamed to OpenAPI Specification.</div><h3>Benefits of OpenAPI</h3><ul><li>Standardized API documentation</li><li>Contract-first development approach</li><li>Automatic client library generation</li><li>Interactive API documentation (Swagger UI)</li><li>Improved interoperability</li></ul><h3>Key Considerations</h3><ul><li>OAS comes with opinionated guidelines for REST API design</li><li>Promotes contract-first vs implementation-first approach</li><li>Requires design to conform with specifications</li><li>Tools can generate code from contracts</li></ul><div class="highlight-box"><strong>Contract-First:</strong> Design the API contract (interface) first, then write code that implements the contract. This ensures consistency and better planning.</div><h3>Example Tools</h3><ul><li><strong>Swagger Editor:</strong> Design OpenAPI specs</li><li><strong>Swagger UI:</strong> Interactive API documentation</li><li><strong>Swagger Codegen:</strong> Generate client libraries</li><li><strong>SwaggerHub:</strong> Collaborative API design</li></ul><h3>When to Use OpenAPI</h3><ul><li>Public-facing APIs</li><li>APIs consumed by multiple teams</li><li>When you need generated documentation</li><li>Contract-first development workflows</li><li>Partner/vendor integrations</li></ul></div></div><footer><p>RESTful APIs Course • Lecture 4</p><p>Multitenancy & Advanced Topics</p></footer><script>function showStep(index){document.querySelectorAll(".step-node").forEach((node,i)=>{i===index?node.classList.add("active"):node.classList.remove("active")});document.querySelectorAll(".step-content").forEach((content,i)=>{i===index?content.classList.add("active"):content.classList.remove("active")})}(function(){const savedTheme=localStorage.getItem("theme")||"dark";document.documentElement.setAttribute("data-theme",savedTheme)})();const themeToggle=document.getElementById("themeToggle");const sunIcon=document.querySelector(".sun-icon");const moonIcon=document.querySelector(".moon-icon");const html=document.documentElement;const currentTheme=localStorage.getItem("theme")||"dark";html.setAttribute("data-theme",currentTheme);if(currentTheme==="light"){sunIcon.style.display="none";moonIcon.style.display="block"}themeToggle.addEventListener('click',function(){const theme=html.getAttribute("data-theme");const newTheme=theme==="dark"?"light":"dark";html.setAttribute("data-theme",newTheme);localStorage.setItem("theme",newTheme);if(newTheme==="light"){sunIcon.style.display="none";moonIcon.style.display="block"}else{sunIcon.style.display="block";moonIcon.style.display="none"}});</script></body></html>

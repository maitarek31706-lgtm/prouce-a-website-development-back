<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 05 - Partial Responses</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
:root{--primary-blue:#3b82f6;--dark-bg:#020617;--card-bg:rgba(255,255,255,0.05);--border-light:rgba(255,255,255,0.12);--text-main:#e5e7eb;--text-dim:#94a3b8;--accent-green:#4ed9c2;--accent-cyan:#4ed9c2}[data-theme="light"]{--primary-blue:#3b82f6;--dark-bg:#f8fafc;--card-bg:#ffffff;--border-light:rgba(15,23,42,0.12);--text-main:#0f172a;--text-dim:#64748b;--accent-green:#06b6d4;--accent-cyan:#06b6d4}*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Inter',sans-serif;background:var(--dark-bg);color:var(--text-main);min-height:100vh;line-height:1.6;transition:background-color .3s ease,color .3s ease}.top-bar{background:var(--card-bg);backdrop-filter:blur(12px);padding:18px 5%;border-bottom:1px solid var(--border-light);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;z-index:1000}.top-bar h2{color:var(--text-main);margin:0;font-size:1.5rem}.exit-link{color:var(--text-dim);text-decoration:none;font-weight:700;font-size:.95rem;transition:color .3s ease}.exit-link:hover{color:var(--text-main)}.theme-toggle{background:rgba(255,255,255,0.1);border:1px solid var(--border-light);border-radius:12px;padding:8px 16px;cursor:pointer;display:flex;align-items:center;gap:8px;color:var(--text-main);font-weight:600;font-size:.9rem;transition:all .2s ease;margin-left:auto}.theme-toggle:hover{background:rgba(255,255,255,0.15);transform:translateY(-2px)}.theme-toggle svg{width:20px;height:20px}.hero{text-align:center;padding:80px 20px 60px}.hero .badge{color:var(--accent-green);font-weight:800;font-size:.9rem;text-transform:uppercase;letter-spacing:2px;margin-bottom:12px}.hero h1{font-size:3.2rem;font-weight:800;background:linear-gradient(to right,var(--text-main),var(--primary-blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:12px}.hero p{color:var(--text-dim);font-size:1.15rem;max-width:600px;margin:0 auto}.timeline-nav{display:flex;justify-content:center;gap:25px;position:relative;margin:50px 0 70px;padding:0 5%;flex-wrap:wrap}.timeline-line{position:absolute;top:20px;left:10%;right:10%;height:3px;background:var(--border-light);z-index:1}.step-node{position:relative;z-index:2;text-align:center;cursor:pointer;min-width:80px}.dot{width:48px;height:48px;background:var(--dark-bg);border:3px solid var(--border-light);border-radius:50%;margin:0 auto 12px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:1.3rem;color:var(--text-dim);transition:all .35s ease}.step-node.active .dot,.step-node:hover .dot{background:var(--primary-blue);border-color:var(--primary-blue);color:white;box-shadow:0 0 24px rgba(59,130,246,0.5);transform:scale(1.12)}.node-label{font-size:.7rem;font-weight:700;color:var(--text-dim);text-transform:uppercase;letter-spacing:.5px}.step-node.active .node-label{color:var(--text-main)}.step-content{display:none;max-width:1000px;margin:0 auto;padding:0 25px 80px;animation:fadeIn .5s ease}.step-content.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}h2{font-size:2.4rem;margin-bottom:28px;color:var(--text-main);font-weight:800}h3{font-size:1.6rem;margin:32px 0 16px 0;color:var(--text-main);font-weight:700}.theory-box{background:var(--card-bg);border:1px solid var(--border-light);border-radius:16px;padding:28px;margin-bottom:36px;color:var(--text-dim);font-size:1.1rem;line-height:1.8}.highlight-box{background:linear-gradient(135deg,rgba(59,130,246,0.15),rgba(168,85,247,0.15));border-left:4px solid var(--primary-blue);padding:20px 24px;margin:28px 0;border-radius:8px;color:var(--text-main);font-weight:500}.step-content p{color:var(--text-dim);margin-bottom:20px;font-size:1.05rem;line-height:1.75}.step-content strong{color:var(--text-main);font-weight:700}code{background:rgba(59,130,246,0.1);padding:2px 8px;border-radius:4px;font-family:'Fira Code',monospace;font-size:.95em;color:var(--accent-cyan)}.code-block{background:rgba(0,0,0,0.3);border:1px solid var(--border-light);border-radius:12px;padding:20px;margin:24px 0;font-family:'Fira Code',monospace;font-size:.9rem;overflow-x:auto;color:var(--accent-cyan);line-height:1.6}ul{margin:20px 0;padding-left:24px}ul li{margin:12px 0;color:var(--text-dim);line-height:1.7}table{width:100%;border-collapse:collapse;margin:28px 0;background:var(--card-bg);border-radius:12px;overflow:hidden}table th{background:rgba(59,130,246,0.15);padding:16px;text-align:left;font-weight:700;color:var(--text-main);border-bottom:2px solid var(--border-light)}table td{padding:16px;border-bottom:1px solid var(--border-light);color:var(--text-dim)}table tr:last-child td{border-bottom:none}table tr:hover{background:rgba(255,255,255,0.03)}footer{text-align:center;padding:40px 20px;color:var(--text-dim);font-size:.9rem;border-top:1px solid var(--border-light);margin-top:60px}footer p{margin:8px 0}
    </style>
</head>
<body>
<nav class="top-bar">
        <a href="../../../../index.html" class="logo-link">
            <img src="../../../../logo.jpeg" alt="Logo" class="site-logo">
        </a>
        <a href="../../../../index.html" style="text-decoration: none;">
            <h2 style="color: white; margin: 0;">Digital Marketing</h2>
        </a>
        <a href="apis-lecture.html" class="exit-link">← Back to Syllabus</a>
        <h2>Partial Responses</h2>
    <button class="theme-toggle" id="themeToggle">
        <svg class="sun-icon" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
        </svg>
        <svg class="moon-icon" fill="currentColor" viewBox="0 0 24 24" style="display:none;">
          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
        </svg>
    </button>
</nav>

<div class="hero">
    <div class="badge">Lesson 05</div>
    <h1>Partial Responses</h1>
    <p>Supporting partial retrieval of large binary resources</p>
</div>

<div class="lesson-container">
    <nav class="timeline-nav">
        <div class="timeline-line"></div>
        <div class="step-node active" onclick="showStep(0)"><div class="dot">1</div><div class="node-label">Overview</div></div>
        <div class="step-node" onclick="showStep(1)"><div class="dot">2</div><div class="node-label">Accept-Ranges</div></div>
        <div class="step-node" onclick="showStep(2)"><div class="dot">3</div><div class="node-label">HEAD Request</div></div>
        <div class="step-node" onclick="showStep(3)"><div class="dot">4</div><div class="node-label">Range Header</div></div>
        <div class="step-node" onclick="showStep(4)"><div class="dot">5</div><div class="node-label">206 Response</div></div>
    </nav>

    <div class="step-content active">
        <h2>Why Partial Responses?</h2>
        <div class="theory-box">
            Some resources contain large binary fields, such as files or images. To overcome problems caused by unreliable and intermittent connections and to improve response times, consider supporting the partial retrieval of large binary resources.
        </div>
        <h3>Common Use Cases</h3>
        <ul>
            <li><strong>Video streaming</strong> - Download video in chunks</li>
            <li><strong>Large file downloads</strong> - Resume interrupted downloads</li>
            <li><strong>Image loading</strong> - Progressive image display</li>
            <li><strong>PDF documents</strong> - Download page by page</li>
            <li><strong>Audio streaming</strong> - Buffer audio data</li>
        </ul>
        <div class="highlight-box">
            <strong>Benefits:</strong> Improved performance, better user experience, reduced bandwidth waste, and support for resume functionality.
        </div>
    </div>

    <div class="step-content">
        <h2>Accept-Ranges Header</h2>
        <div class="theory-box">
            To support partial responses, the web API should support the <code>Accept-Ranges</code> header for GET requests for large resources. This header indicates that the GET operation supports partial requests.
        </div>
        <h3>Server Response</h3>
        <p>When a client makes a request for a large resource, the server includes the Accept-Ranges header in the response:</p>
        <div class="code-block">GET https://api.contoso.com/products/10?fields=productImage

Response:
HTTP/1.1 200 OK
Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 4580</div>
        <p>The <code>Accept-Ranges: bytes</code> header tells the client that it can request specific byte ranges of this resource.</p>
        <h3>Key Headers</h3>
        <ul>
            <li><code>Accept-Ranges: bytes</code> - Server supports byte range requests</li>
            <li><code>Content-Length</code> - Total size of the resource</li>
            <li><code>Content-Type</code> - MIME type of the resource</li>
        </ul>
    </div>

    <div class="step-content">
        <h2>HTTP HEAD Requests</h2>
        <div class="theory-box">
            A HEAD request is similar to a GET request, except that it only returns the HTTP headers that describe the resource, with an empty message body.
        </div>
        <p>A client application can issue a HEAD request to determine whether to fetch a resource by using partial GET requests.</p>
        <h3>HEAD Request Example</h3>
        <div class="code-block">HEAD https://api.contoso.com/products/10?fields=productImage

Response:
HTTP/1.1 200 OK
Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 4580</div>
        <h3>Why Use HEAD?</h3>
        <ul>
            <li>Check if a resource exists without downloading it</li>
            <li>Get resource metadata (size, type, modified date)</li>
            <li>Determine if Accept-Ranges is supported</li>
            <li>Check file size before deciding download strategy</li>
            <li>Validate cache freshness</li>
        </ul>
        <div class="highlight-box">
            <strong>Efficiency:</strong> HEAD requests save bandwidth by not transferring the actual resource body, only the metadata.
        </div>
    </div>

    <div class="step-content">
        <h2>Using the Range Header</h2>
        <div class="theory-box">
            The client application can use the <code>Range</code> header to retrieve the resource in smaller chunks.
        </div>
        <h3>First Request - Get First 2500 Bytes</h3>
        <div class="code-block">GET https://api.contoso.com/products/10?fields=productImage
Range: bytes=0-2499</div>
        <p>The <code>Range: bytes=0-2499</code> header tells the server to return only bytes 0 through 2499.</p>
        <h3>Range Header Syntax</h3>
        <ul>
            <li><code>bytes=0-499</code> - First 500 bytes</li>
            <li><code>bytes=500-999</code> - Next 500 bytes</li>
            <li><code>bytes=-500</code> - Last 500 bytes</li>
            <li><code>bytes=500-</code> - From byte 500 to end</li>
            <li><code>bytes=0-0,-1</code> - First and last byte</li>
        </ul>
        <h3>Multiple Ranges</h3>
        <p>You can also request multiple ranges in one request:</p>
        <div class="code-block">Range: bytes=0-99,200-299,400-499</div>
    </div>

    <div class="step-content">
        <h2>206 Partial Content Response</h2>
        <div class="theory-box">
            The response message indicates that this response is partial by returning HTTP status code <code>206</code>.
        </div>
        <h3>Server Response</h3>
        <div class="code-block">HTTP/1.1 206 Partial Content
Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 2500
Content-Range: bytes 0-2499/4580

[Binary data for bytes 0-2499]</div>
        <h3>Response Headers Explained</h3>
        <ul>
            <li><code>206 Partial Content</code> - Status code indicating partial response</li>
            <li><code>Content-Length: 2500</code> - Actual number of bytes in THIS response</li>
            <li><code>Content-Range: bytes 0-2499/4580</code> - Which part of the resource + total size</li>
        </ul>
        <h3>Subsequent Request - Get Remaining Bytes</h3>
        <div class="code-block">GET https://api.contoso.com/products/10?fields=productImage
Range: bytes=2500-4579

Response:
HTTP/1.1 206 Partial Content
Accept-Ranges: bytes
Content-Type: image/jpeg
Content-Length: 2080
Content-Range: bytes 2500-4579/4580

[Binary data for bytes 2500-4579]</div>
        <div class="highlight-box">
            <strong>Complete Workflow:</strong>
            <br>1. HEAD request → Get file size
            <br>2. GET with Range → Download in chunks
            <br>3. 206 response → Process each chunk
            <br>4. Repeat until complete
        </div>
    </div>
</div>

<footer>
    <p>RESTful APIs Course • Lecture 4</p>
    <p>Partial Responses & Large Resources</p>
</footer>

<script>
function showStep(index){document.querySelectorAll('.step-node').forEach((node,i)=>{i===index?node.classList.add('active'):node.classList.remove('active')});document.querySelectorAll('.step-content').forEach((content,i)=>{i===index?content.classList.add('active'):content.classList.remove('active')})}
(function(){const savedTheme=localStorage.getItem('theme')||'dark';document.documentElement.setAttribute('data-theme',savedTheme)})();
const themeToggle=document.getElementById('themeToggle');const sunIcon=document.querySelector('.sun-icon');const moonIcon=document.querySelector('.moon-icon');const html=document.documentElement;const currentTheme=localStorage.getItem('theme')||'dark';html.setAttribute('data-theme',currentTheme);if(currentTheme==='light'){sunIcon.style.display='none';moonIcon.style.display='block'}themeToggle.addEventListener('click',function(){const theme=html.getAttribute('data-theme');const newTheme=theme==='dark'?'light':'dark';html.setAttribute('data-theme',newTheme);localStorage.setItem('theme',newTheme);if(newTheme==='light'){sunIcon.style.display='none';moonIcon.style.display='block'}else{sunIcon.style.display='block';moonIcon.style.display='none'}});
</script>
</body>
</html>
